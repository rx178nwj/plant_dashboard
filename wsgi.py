# wsgi.py
from dotenv import load_dotenv

# -------------------------------------------------------------------
# Gunicornワーカーが起動する際に、他のどのモジュールよりも先に
# .envファイルから環境変数を読み込むようにします。
# -------------------------------------------------------------------
load_dotenv()

from app import create_app, init_db

# データベースを初期化
init_db()

# Flaskアプリケーションインスタンスを作成
app = create_app()

# データ収集用のバックグラウンドスレッドはデーモンに集約されたため、
# ここでのスレッド起動は不要になりました。
